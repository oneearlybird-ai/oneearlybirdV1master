ğŸš€ EarlyBird V1 Master â€” Roadmap (Super Diamond â€¢ Updated)

Overall build: ~72â€“75%

Security (â‰ˆ85%)
- âœ… HSTS preload, CSP with nonce, X-Content-Type-Options, Referrer-Policy
- âœ… Anti-hallucination CI (denyRegex, redaction, schema checks), secrets scanning
- âœ… Safer spawn (shell:false), log redaction for URIs
- âŒ Permissions-Policy (deny-by-default) â€” PENDING
- âŒ COOP/COEP â€” PENDING
- âŒ Suppress X-Powered-By â€” PENDING
- âŒ DNSSEC/SPF/DKIM/DMARC â€” PENDING

APIs & Integrations (â‰ˆ65%)
- âœ… Auth scaffold (Google OAuth split WIP)
- âœ… Stripe webhook (raw-body + sig verify) â€¢ unsigned â†’ 4xx
- âœ… Redis limiter (/api/ratelimit-test 200â†’429â†’200)
- âŒ Normalize Stripe envs (SECRET vs API KEY) â€” PENDING
- âŒ Subscriptions + metered usage flow â€” PENDING
- âŒ PHI vendor wiring (ASR/TTS/LLM/storage) â€” PENDING

Database (â‰ˆ80%)
- âœ… Neon Postgres (pooled/unpooled DSNs) wired in Vercel
- âœ… Health/summary always 200 with db/cache/version fields
- âŒ PHI-safe audit logging â€” PENDING

Media/Telephony (â‰ˆ50%)
- âœ… WS Media Orchestrator scaffold (apps/media), backpressure, ping/pong, no PHI logs
- âœ… AWS deploy helper script present (Railway removed)
- âŒ Deployed WS with public TLS domain â€” PENDING
- âŒ Twilio Media Streams handshake (kill 31920) â€” PENDING
- âŒ ASR(TBD Deepgram/Google), TTS(ElevenLabs/MS/Google), barge-in â€” PENDING

Routing & Frontend (â‰ˆ75%)
- âœ… Public routes live; canonical domain fixed
- âœ… /api/routes/manifest, /api/usage/summary, /api/status â†’ 200
- âŒ Protected zone (PHI) routing â€” PENDING
- âŒ Login/signup flicker + tab unification â€” PENDING

Infra & CI/CD (â‰ˆ80%)
- âœ… Vercel prod/preview live; previews promoted safely
- âœ… Pre-push: ESLint, Semgrep, Trivy, Gitleaks (noise reduced via .semgrepignore)
- âŒ Monitoring/observability dashboards â€” PENDING

End-to-End Voice Flow â€” Percentages by Stage
Caller (PSTN/WebRTC)
  â”œâ”€ PSTN (Twilio Programmable Voice: Streams + SIP) â€” ~70%
  â””â”€ WebRTC Click-to-Call â€” ~50%

Bootstrap
  â””â”€ /api/voice/incoming â†’ <Connect><Stream> or WebRTC upgrade â€” 100%

Media Orchestrator (wss://â€¦/rtm/voice)
  â”œâ”€ Ingress chunking + VAD â€” ~50%
  â”œâ”€ Streaming ASR (Deepgram/Google) â€” 0%
  â”œâ”€ Micro-Policy model (3â€“8B distilled) â€” 0%
  â”œâ”€ Response LLM (realtime/function-calling) â€” ~20%
  â”œâ”€ Streaming TTS (11Labs/MS/Google) â€” 0%
  â”œâ”€ Latency masking/backchannels â€” 0%
  â””â”€ Barge-in mute/resume â€” 0%

Business Logic & Integrations
  â”œâ”€ Calendars (Google/M365/Calendly) â€” ~20% (Google split WIP)
  â”œâ”€ CRM (HubSpot/Salesforce/â€¦) â€” 0%
  â”œâ”€ Knowledge Base (pgvector/Postgres or Pinecone) â€” ~30%
  â”œâ”€ Address/Time/Geo (GMaps) â€” 0%
  â””â”€ Transfer/Handoff (policy + warm transfer) â€” 0%

Transfer to Owner/Team
  â””â”€ /api/voice/transfer â†’ /api/voice/dial (<Dial>) â€” 0%

Call Completion
  â”œâ”€ /api/voice/status â€” 0%
  â”œâ”€ /api/voice/recording â†’ S3 (+CloudFront) â€” 0%
  â””â”€ /api/transcript/finalize (diarize/redact/store) â€” 100%

Post-Call Fanout (â‰¤1 s)
  â”œâ”€ Stripe Usage Records (minutes/tokens) â€” ~30%
  â”œâ”€ Outbound webhook (HMAC) â†’ CRM/helpdesk â€” 0%
  â””â”€ Dashboard liveâ†’finalized record â€” ~40%

Targets
- Mouth-to-ear â‰¤ 500â€“700 ms
- ASR partials < 150 ms
- Policy < 30 ms
- First-token < 120 ms
- TTS start < 150 ms

Next Patches (strict SVP)
1) Media deploy (AWS), confirm Twilio Streams handshake (kill 31920)
2) Header hardening: Permissions-Policy, COOP/COEP, hide X-Powered-By
3) Stripe usage metering endpoint â†’ DB â†’ Stripe usage records
4) Minimal ASR streaming (Deepgram/Google) to get partials flowing
5) Protected zone routing + PHI audit logs
6) Monitoring/observability dashboard and alerts

Guardrails & Gates (always)
- Probe â†’ SVP(â‰¤2 files/â‰¤120 LOC) â†’ Gates(typecheck/build/manifest/headers/endpoint smokes) â†’ Verdicts â†’ Confidence â‰¥97% or zz
- No PHI in logs; redact secrets; do not overwrite CSP/nonce
- Stripe: unsigned â†’ 4xx; signed â†’ 2xx fast path

==== 2025-09-14 â€“ Infra & DNS Progress (Append) ====
Summary
- EC2 FreeSWITCH bridge in IAD stood up (t3.micro). Public subnet with IGW route created; SG restricted to Twilio IAD CIDRs (5061/tcp, 20000â€“30000/udp); 80/tcp temporary for LE.
- FreeSWITCH to be installed/configured (tls-5061, PCMU, SRTP, inbound-proxy-media, RTP 20000â€“30000); dialplan to fork uplink to AWS media WS; EIP 52.205.16.98 attached.
- DNS: using Vercel DNS A record for sip.media.oneearlybird.ai â†’ 52.205.16.98 (pending â†’ now live).

Next Steps
- Add/verify A record; SSM finish block to set MEDIA_TOKEN and LE cert; remove 80/tcp; Twilio SIP Domain; smokes; then EL outbound playback.

Status
- AWS FreeSWITCH bridge: 60% (initial infra in place)
- DNS: 50%

==== 2025-09-14 (Later) â€“ DNS Live & FS Install Pending (Append) ====
Updates
- DNS: Vercel DNS A sip.media.oneearlybird.ai â†’ 52.205.16.98 (TTL 60) is live; verified with dig.
- Instance to keep: i-0ccc80b16a2da659f (EIP 52.205.16.98); ensure duplicates are terminated.
- FreeSWITCH: Not installed yet on the kept instance; plan to install via deb repo, then configure tls-5061 + dialplan and set token.

Next
1) SSM root session â†’ install FreeSWITCH + modules; configure RTP 20000â€“30000 and external IPs; add tls-5061.
2) Add dialplan (answer â†’ audio_fork â†’ AWS WS with token); reload FS.
3) LE cert; link certs; remove 80/tcp from SG.
4) Twilio SIP Domain + smokes.

Status
- DNS: 90%
- AWS FreeSWITCH bridge: 55%
