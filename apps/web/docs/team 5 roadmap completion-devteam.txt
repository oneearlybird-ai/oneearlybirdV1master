TEAM 5 ROADMAP COMPLETION — EarlyBird (Team 4 → Team 5)
Date: 2025-09-09 • Prod: https://oneearlybird.ai

ONE-LINE MAP (backend, routes → integrations)
Twilio Call → POST /api/voice/incoming → TwiML <Connect><Stream url="wss://media.oneearlybird.ai/rtm/voice"> → Media WS (AWS) → ASR→Policy/Tools→LLM→TTS → optional S3 store.
Client (billing) → Stripe portal → Stripe events → POST /api/stripe/webhook → usage table → GET /api/usage/summary.
Client (storage) → POST /api/storage/presign → signed PUT/GET to Rumble S3 (short TTL).
Public endpoints → limiter policy (Upstash) → /api/ratelimit-test 200→429 proof.

PHASES — % COMPLETE (conservative, evidence-based)
0 Security posture verify .......... 80%  (headers previously green; re-smoke on arrival)
1 Routes registry/manifest ......... 40%  (implement registry + /api/routes/manifest)
2 Env template completeness ........ 90%  (.env.example names present; verify preview/prod parity)
3 Telephony ingress (Twilio) ....... 60%  (ingress OK; media WS pending)
4 Media orchestrator handoff ....... 15%  (deploy WS service; TLS; Streams handler)
5 Stripe webhook (RAW body) ........ 50%  (CLI smoke pending)
6 S3 storage wrapper & smoke ....... 100% ✅ (403→200→200 PUT)
7 Redis rate-limit smoke ........... 20%  (run 200→429)
8 Usage summary sanity ............. 70%  (200 always; lint/type clean)
9 Tools + KB stubs ................. 10%  (create Node routes; 501/202; JSON validation)
10 Health & readiness polish ........ 50%  (enrich /api/status)
11 Docs & artifacts ................. 60%  (Anti-Drift doc + this handoff; add mm/yy)

OVERALL BACKEND COMPLETION .......... 62–68%

SMOKES EXECUTED (prod)
• Storage presign: unauth 403; auth 200; PUT 200 OK (Rumble S3).
• Twilio incoming: unsigned 403; TwiML returned (WS not yet live).
• Headers (prior): HSTS preload, CSP nonce, COOP/COEP, Permissions-Policy deny, X-XSS-Protection:0, nosniff, no x-powered-by.

NEXT ACTIONS (Team 5)
1 Redis 200→429 smoke and fix if needed. 
2 Stripe webhook RAW-body verify via Stripe CLI; fast 200 for common events. 
3 Stand up media WS at wss://media.oneearlybird.ai; resolve 31920; document latency targets (≤700 ms mouth-to-ear).
4 Implement routes registry + /api/routes/manifest.
5 Create Tools/KB stubs with Node runtime and JSON validation; return 501/202; no PHI logs.
6 Finalize /api/status and /api/usage/summary; remove any lint “any”.

mm SNAPSHOT (handoff)
Area                | Owner | %  | HIPAA | Open Issues                              | Next
Storage (Rumble)    | B+S   |100 | OK    | —                                        | Optional GET presign smoke
Media Server        | B+S   |15  | OK    | WS host not deployed                      | Deploy + TLS + Streams handler
Twilio Ingress      | B     |60  | OK    | 31920 until media live                    | Re-test after media is live
Stripe Webhook      | B     |50  | OK    | Verify RAW body + signature               | Stripe CLI smoke
Redis Limiter       | B     |20  | OK    | No 200→429 proof                          | Run smoke; adjust if needed
Routes Manifest     | B     |40  | OK    | Registry + endpoint                        | Implement + smoke
Usage/Status        | B     |70  | OK    | Lint/type cleanup                          | Finalize
Docs (mm/yy)        | Docs  |60  | OK    | Snapshot + checklist                        | Commit/update

GUARDRAILS TO MAINTAIN
Anti-Drift line; one batch/message; SVP ≤2 files/≤120 LOC (bypass only with necessity + rollback); never weaken security; single header source in middleware; pooled DSN; signed short-TTL URLs; no PHI in logs or keys.

— END —
